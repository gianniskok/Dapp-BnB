{"ast":null,"code":"'use strict';\n\nvar util = require('./_util');\n\nmodule.exports = function defFunc(ajv) {\n  if (!ajv._opts.$data) {\n    console.warn('keyword select requires $data option');\n    return ajv;\n  }\n\n  var metaSchemaRef = util.metaSchemaRef(ajv);\n  var compiledCaseSchemas = [];\n  defFunc.definition = {\n    validate: function v(schema, data, parentSchema) {\n      if (parentSchema.selectCases === undefined) throw new Error('keyword \"selectCases\" is absent');\n      var compiled = getCompiledSchemas(parentSchema, false);\n      var validate = compiled.cases[schema];\n      if (validate === undefined) validate = compiled.default;\n      if (typeof validate == 'boolean') return validate;\n      var valid = validate(data);\n      if (!valid) v.errors = validate.errors;\n      return valid;\n    },\n    $data: true,\n    metaSchema: {\n      type: ['string', 'number', 'boolean', 'null']\n    }\n  };\n  ajv.addKeyword('select', defFunc.definition);\n  ajv.addKeyword('selectCases', {\n    compile: function (schemas, parentSchema) {\n      var compiled = getCompiledSchemas(parentSchema);\n\n      for (var value in schemas) compiled.cases[value] = compileOrBoolean(schemas[value]);\n\n      return function () {\n        return true;\n      };\n    },\n    valid: true,\n    metaSchema: {\n      type: 'object',\n      additionalProperties: metaSchemaRef\n    }\n  });\n  ajv.addKeyword('selectDefault', {\n    compile: function (schema, parentSchema) {\n      var compiled = getCompiledSchemas(parentSchema);\n      compiled.default = compileOrBoolean(schema);\n      return function () {\n        return true;\n      };\n    },\n    valid: true,\n    metaSchema: metaSchemaRef\n  });\n  return ajv;\n\n  function getCompiledSchemas(parentSchema, create) {\n    var compiled;\n    compiledCaseSchemas.some(function (c) {\n      if (c.parentSchema === parentSchema) {\n        compiled = c;\n        return true;\n      }\n    });\n\n    if (!compiled && create !== false) {\n      compiled = {\n        parentSchema: parentSchema,\n        cases: {},\n        default: true\n      };\n      compiledCaseSchemas.push(compiled);\n    }\n\n    return compiled;\n  }\n\n  function compileOrBoolean(schema) {\n    return typeof schema == 'boolean' ? schema : ajv.compile(schema);\n  }\n};","map":{"version":3,"names":["util","require","module","exports","defFunc","ajv","_opts","$data","console","warn","metaSchemaRef","compiledCaseSchemas","definition","validate","v","schema","data","parentSchema","selectCases","undefined","Error","compiled","getCompiledSchemas","cases","default","valid","errors","metaSchema","type","addKeyword","compile","schemas","value","compileOrBoolean","additionalProperties","create","some","c","push"],"sources":["/Users/iaonniskokkoros/Documents/OG BrokeBoiz/node_modules/ajv-keywords/keywords/select.js"],"sourcesContent":["'use strict';\n\nvar util = require('./_util');\n\nmodule.exports = function defFunc(ajv) {\n  if (!ajv._opts.$data) {\n    console.warn('keyword select requires $data option');\n    return ajv;\n  }\n  var metaSchemaRef = util.metaSchemaRef(ajv);\n  var compiledCaseSchemas = [];\n\n  defFunc.definition = {\n    validate: function v(schema, data, parentSchema) {\n      if (parentSchema.selectCases === undefined)\n        throw new Error('keyword \"selectCases\" is absent');\n      var compiled = getCompiledSchemas(parentSchema, false);\n      var validate = compiled.cases[schema];\n      if (validate === undefined) validate = compiled.default;\n      if (typeof validate == 'boolean') return validate;\n      var valid = validate(data);\n      if (!valid) v.errors = validate.errors;\n      return valid;\n    },\n    $data: true,\n    metaSchema: { type: ['string', 'number', 'boolean', 'null'] }\n  };\n\n  ajv.addKeyword('select', defFunc.definition);\n  ajv.addKeyword('selectCases', {\n    compile: function (schemas, parentSchema) {\n      var compiled = getCompiledSchemas(parentSchema);\n      for (var value in schemas)\n        compiled.cases[value] = compileOrBoolean(schemas[value]);\n      return function() { return true; };\n    },\n    valid: true,\n    metaSchema: {\n      type: 'object',\n      additionalProperties: metaSchemaRef\n    }\n  });\n  ajv.addKeyword('selectDefault', {\n    compile: function (schema, parentSchema) {\n      var compiled = getCompiledSchemas(parentSchema);\n      compiled.default = compileOrBoolean(schema);\n      return function() { return true; };\n    },\n    valid: true,\n    metaSchema: metaSchemaRef\n  });\n  return ajv;\n\n\n  function getCompiledSchemas(parentSchema, create) {\n    var compiled;\n    compiledCaseSchemas.some(function (c) {\n      if (c.parentSchema === parentSchema) {\n        compiled = c;\n        return true;\n      }\n    });\n    if (!compiled && create !== false) {\n      compiled = {\n        parentSchema: parentSchema,\n        cases: {},\n        default: true\n      };\n      compiledCaseSchemas.push(compiled);\n    }\n    return compiled;\n  }\n\n  function compileOrBoolean(schema) {\n    return typeof schema == 'boolean'\n            ? schema\n            : ajv.compile(schema);\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}