{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _os = _interopRequireDefault(require(\"os\"));\n\nvar _cacache = _interopRequireDefault(require(\"cacache\"));\n\nvar _findCacheDir = _interopRequireDefault(require(\"find-cache-dir\"));\n\nvar _workerFarm = _interopRequireDefault(require(\"worker-farm\"));\n\nvar _serializeJavascript = _interopRequireDefault(require(\"serialize-javascript\"));\n\nvar _isWsl = _interopRequireDefault(require(\"is-wsl\"));\n\nvar _minify = _interopRequireDefault(require(\"./minify\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nconst worker = require.resolve('./worker');\n\nclass TaskRunner {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      cache,\n      parallel\n    } = options;\n    this.cacheDir = cache === true ? (0, _findCacheDir.default)({\n      name: 'terser-webpack-plugin'\n    }) || _os.default.tmpdir() : cache; // In some cases cpus() returns undefined\n    // https://github.com/nodejs/node/issues/19022\n\n    const cpus = _os.default.cpus() || {\n      length: 1\n    }; // WSL sometimes freezes, error seems to be on the WSL side\n    // https://github.com/webpack-contrib/terser-webpack-plugin/issues/21\n\n    this.maxConcurrentWorkers = _isWsl.default ? 1 : parallel === true ? cpus.length - 1 : Math.min(Number(parallel) || 0, cpus.length - 1);\n  }\n\n  run(tasks, callback) {\n    /* istanbul ignore if */\n    if (!tasks.length) {\n      callback(null, []);\n      return;\n    }\n\n    if (this.maxConcurrentWorkers > 1) {\n      const workerOptions = process.platform === 'win32' ? {\n        maxConcurrentWorkers: this.maxConcurrentWorkers,\n        maxConcurrentCallsPerWorker: 1\n      } : {\n        maxConcurrentWorkers: this.maxConcurrentWorkers\n      };\n      this.workers = (0, _workerFarm.default)(workerOptions, worker);\n\n      this.boundWorkers = (options, cb) => {\n        try {\n          this.workers((0, _serializeJavascript.default)(options), cb);\n        } catch (error) {\n          // worker-farm can fail with ENOMEM or something else\n          cb(error);\n        }\n      };\n    } else {\n      this.boundWorkers = (options, cb) => {\n        try {\n          cb(null, (0, _minify.default)(options));\n        } catch (error) {\n          cb(error);\n        }\n      };\n    }\n\n    let toRun = tasks.length;\n    const results = [];\n\n    const step = (index, data) => {\n      toRun -= 1;\n      results[index] = data;\n\n      if (!toRun) {\n        callback(null, results);\n      }\n    };\n\n    tasks.forEach((task, index) => {\n      const enqueue = () => {\n        this.boundWorkers(task, (error, data) => {\n          const result = error ? {\n            error\n          } : data;\n\n          const done = () => step(index, result);\n\n          if (this.cacheDir && !result.error) {\n            _cacache.default.put(this.cacheDir, (0, _serializeJavascript.default)(task.cacheKeys), JSON.stringify(data)).then(done, done);\n          } else {\n            done();\n          }\n        });\n      };\n\n      if (this.cacheDir) {\n        _cacache.default.get(this.cacheDir, (0, _serializeJavascript.default)(task.cacheKeys)).then(_ref => {\n          let {\n            data\n          } = _ref;\n          return step(index, JSON.parse(data));\n        }, enqueue);\n      } else {\n        enqueue();\n      }\n    });\n  }\n\n  exit() {\n    if (this.workers) {\n      _workerFarm.default.end(this.workers);\n    }\n  }\n\n}\n\nexports.default = TaskRunner;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","_os","_interopRequireDefault","require","_cacache","_findCacheDir","_workerFarm","_serializeJavascript","_isWsl","_minify","obj","__esModule","worker","resolve","TaskRunner","constructor","options","cache","parallel","cacheDir","name","tmpdir","cpus","length","maxConcurrentWorkers","Math","min","Number","run","tasks","callback","workerOptions","process","platform","maxConcurrentCallsPerWorker","workers","boundWorkers","cb","error","toRun","results","step","index","data","forEach","task","enqueue","result","done","put","cacheKeys","JSON","stringify","then","get","parse","exit","end"],"sources":["/Users/iaonniskokkoros/Documents/OG BrokeBoiz/node_modules/webpack/node_modules/terser-webpack-plugin/dist/TaskRunner.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _os = _interopRequireDefault(require(\"os\"));\n\nvar _cacache = _interopRequireDefault(require(\"cacache\"));\n\nvar _findCacheDir = _interopRequireDefault(require(\"find-cache-dir\"));\n\nvar _workerFarm = _interopRequireDefault(require(\"worker-farm\"));\n\nvar _serializeJavascript = _interopRequireDefault(require(\"serialize-javascript\"));\n\nvar _isWsl = _interopRequireDefault(require(\"is-wsl\"));\n\nvar _minify = _interopRequireDefault(require(\"./minify\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst worker = require.resolve('./worker');\n\nclass TaskRunner {\n  constructor(options = {}) {\n    const {\n      cache,\n      parallel\n    } = options;\n    this.cacheDir = cache === true ? (0, _findCacheDir.default)({\n      name: 'terser-webpack-plugin'\n    }) || _os.default.tmpdir() : cache; // In some cases cpus() returns undefined\n    // https://github.com/nodejs/node/issues/19022\n\n    const cpus = _os.default.cpus() || {\n      length: 1\n    }; // WSL sometimes freezes, error seems to be on the WSL side\n    // https://github.com/webpack-contrib/terser-webpack-plugin/issues/21\n\n    this.maxConcurrentWorkers = _isWsl.default ? 1 : parallel === true ? cpus.length - 1 : Math.min(Number(parallel) || 0, cpus.length - 1);\n  }\n\n  run(tasks, callback) {\n    /* istanbul ignore if */\n    if (!tasks.length) {\n      callback(null, []);\n      return;\n    }\n\n    if (this.maxConcurrentWorkers > 1) {\n      const workerOptions = process.platform === 'win32' ? {\n        maxConcurrentWorkers: this.maxConcurrentWorkers,\n        maxConcurrentCallsPerWorker: 1\n      } : {\n        maxConcurrentWorkers: this.maxConcurrentWorkers\n      };\n      this.workers = (0, _workerFarm.default)(workerOptions, worker);\n\n      this.boundWorkers = (options, cb) => {\n        try {\n          this.workers((0, _serializeJavascript.default)(options), cb);\n        } catch (error) {\n          // worker-farm can fail with ENOMEM or something else\n          cb(error);\n        }\n      };\n    } else {\n      this.boundWorkers = (options, cb) => {\n        try {\n          cb(null, (0, _minify.default)(options));\n        } catch (error) {\n          cb(error);\n        }\n      };\n    }\n\n    let toRun = tasks.length;\n    const results = [];\n\n    const step = (index, data) => {\n      toRun -= 1;\n      results[index] = data;\n\n      if (!toRun) {\n        callback(null, results);\n      }\n    };\n\n    tasks.forEach((task, index) => {\n      const enqueue = () => {\n        this.boundWorkers(task, (error, data) => {\n          const result = error ? {\n            error\n          } : data;\n\n          const done = () => step(index, result);\n\n          if (this.cacheDir && !result.error) {\n            _cacache.default.put(this.cacheDir, (0, _serializeJavascript.default)(task.cacheKeys), JSON.stringify(data)).then(done, done);\n          } else {\n            done();\n          }\n        });\n      };\n\n      if (this.cacheDir) {\n        _cacache.default.get(this.cacheDir, (0, _serializeJavascript.default)(task.cacheKeys)).then(({\n          data\n        }) => step(index, JSON.parse(data)), enqueue);\n      } else {\n        enqueue();\n      }\n    });\n  }\n\n  exit() {\n    if (this.workers) {\n      _workerFarm.default.end(this.workers);\n    }\n  }\n\n}\n\nexports.default = TaskRunner;"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAC3CC,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,GAAG,GAAGC,sBAAsB,CAACC,OAAO,CAAC,IAAD,CAAR,CAAhC;;AAEA,IAAIC,QAAQ,GAAGF,sBAAsB,CAACC,OAAO,CAAC,SAAD,CAAR,CAArC;;AAEA,IAAIE,aAAa,GAAGH,sBAAsB,CAACC,OAAO,CAAC,gBAAD,CAAR,CAA1C;;AAEA,IAAIG,WAAW,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,aAAD,CAAR,CAAxC;;AAEA,IAAII,oBAAoB,GAAGL,sBAAsB,CAACC,OAAO,CAAC,sBAAD,CAAR,CAAjD;;AAEA,IAAIK,MAAM,GAAGN,sBAAsB,CAACC,OAAO,CAAC,QAAD,CAAR,CAAnC;;AAEA,IAAIM,OAAO,GAAGP,sBAAsB,CAACC,OAAO,CAAC,UAAD,CAAR,CAApC;;AAEA,SAASD,sBAAT,CAAgCQ,GAAhC,EAAqC;EAAE,OAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;IAAEV,OAAO,EAAEU;EAAX,CAArC;AAAwD;;AAE/F,MAAME,MAAM,GAAGT,OAAO,CAACU,OAAR,CAAgB,UAAhB,CAAf;;AAEA,MAAMC,UAAN,CAAiB;EACfC,WAAW,GAAe;IAAA,IAAdC,OAAc,uEAAJ,EAAI;IACxB,MAAM;MACJC,KADI;MAEJC;IAFI,IAGFF,OAHJ;IAIA,KAAKG,QAAL,GAAgBF,KAAK,KAAK,IAAV,GAAiB,CAAC,GAAGZ,aAAa,CAACL,OAAlB,EAA2B;MAC1DoB,IAAI,EAAE;IADoD,CAA3B,KAE3BnB,GAAG,CAACD,OAAJ,CAAYqB,MAAZ,EAFU,GAEaJ,KAF7B,CALwB,CAOY;IACpC;;IAEA,MAAMK,IAAI,GAAGrB,GAAG,CAACD,OAAJ,CAAYsB,IAAZ,MAAsB;MACjCC,MAAM,EAAE;IADyB,CAAnC,CAVwB,CAYrB;IACH;;IAEA,KAAKC,oBAAL,GAA4BhB,MAAM,CAACR,OAAP,GAAiB,CAAjB,GAAqBkB,QAAQ,KAAK,IAAb,GAAoBI,IAAI,CAACC,MAAL,GAAc,CAAlC,GAAsCE,IAAI,CAACC,GAAL,CAASC,MAAM,CAACT,QAAD,CAAN,IAAoB,CAA7B,EAAgCI,IAAI,CAACC,MAAL,GAAc,CAA9C,CAAvF;EACD;;EAEDK,GAAG,CAACC,KAAD,EAAQC,QAAR,EAAkB;IACnB;IACA,IAAI,CAACD,KAAK,CAACN,MAAX,EAAmB;MACjBO,QAAQ,CAAC,IAAD,EAAO,EAAP,CAAR;MACA;IACD;;IAED,IAAI,KAAKN,oBAAL,GAA4B,CAAhC,EAAmC;MACjC,MAAMO,aAAa,GAAGC,OAAO,CAACC,QAAR,KAAqB,OAArB,GAA+B;QACnDT,oBAAoB,EAAE,KAAKA,oBADwB;QAEnDU,2BAA2B,EAAE;MAFsB,CAA/B,GAGlB;QACFV,oBAAoB,EAAE,KAAKA;MADzB,CAHJ;MAMA,KAAKW,OAAL,GAAe,CAAC,GAAG7B,WAAW,CAACN,OAAhB,EAAyB+B,aAAzB,EAAwCnB,MAAxC,CAAf;;MAEA,KAAKwB,YAAL,GAAoB,CAACpB,OAAD,EAAUqB,EAAV,KAAiB;QACnC,IAAI;UACF,KAAKF,OAAL,CAAa,CAAC,GAAG5B,oBAAoB,CAACP,OAAzB,EAAkCgB,OAAlC,CAAb,EAAyDqB,EAAzD;QACD,CAFD,CAEE,OAAOC,KAAP,EAAc;UACd;UACAD,EAAE,CAACC,KAAD,CAAF;QACD;MACF,CAPD;IAQD,CAjBD,MAiBO;MACL,KAAKF,YAAL,GAAoB,CAACpB,OAAD,EAAUqB,EAAV,KAAiB;QACnC,IAAI;UACFA,EAAE,CAAC,IAAD,EAAO,CAAC,GAAG5B,OAAO,CAACT,OAAZ,EAAqBgB,OAArB,CAAP,CAAF;QACD,CAFD,CAEE,OAAOsB,KAAP,EAAc;UACdD,EAAE,CAACC,KAAD,CAAF;QACD;MACF,CAND;IAOD;;IAED,IAAIC,KAAK,GAAGV,KAAK,CAACN,MAAlB;IACA,MAAMiB,OAAO,GAAG,EAAhB;;IAEA,MAAMC,IAAI,GAAG,CAACC,KAAD,EAAQC,IAAR,KAAiB;MAC5BJ,KAAK,IAAI,CAAT;MACAC,OAAO,CAACE,KAAD,CAAP,GAAiBC,IAAjB;;MAEA,IAAI,CAACJ,KAAL,EAAY;QACVT,QAAQ,CAAC,IAAD,EAAOU,OAAP,CAAR;MACD;IACF,CAPD;;IASAX,KAAK,CAACe,OAAN,CAAc,CAACC,IAAD,EAAOH,KAAP,KAAiB;MAC7B,MAAMI,OAAO,GAAG,MAAM;QACpB,KAAKV,YAAL,CAAkBS,IAAlB,EAAwB,CAACP,KAAD,EAAQK,IAAR,KAAiB;UACvC,MAAMI,MAAM,GAAGT,KAAK,GAAG;YACrBA;UADqB,CAAH,GAEhBK,IAFJ;;UAIA,MAAMK,IAAI,GAAG,MAAMP,IAAI,CAACC,KAAD,EAAQK,MAAR,CAAvB;;UAEA,IAAI,KAAK5B,QAAL,IAAiB,CAAC4B,MAAM,CAACT,KAA7B,EAAoC;YAClClC,QAAQ,CAACJ,OAAT,CAAiBiD,GAAjB,CAAqB,KAAK9B,QAA1B,EAAoC,CAAC,GAAGZ,oBAAoB,CAACP,OAAzB,EAAkC6C,IAAI,CAACK,SAAvC,CAApC,EAAuFC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAAvF,EAA6GU,IAA7G,CAAkHL,IAAlH,EAAwHA,IAAxH;UACD,CAFD,MAEO;YACLA,IAAI;UACL;QACF,CAZD;MAaD,CAdD;;MAgBA,IAAI,KAAK7B,QAAT,EAAmB;QACjBf,QAAQ,CAACJ,OAAT,CAAiBsD,GAAjB,CAAqB,KAAKnC,QAA1B,EAAoC,CAAC,GAAGZ,oBAAoB,CAACP,OAAzB,EAAkC6C,IAAI,CAACK,SAAvC,CAApC,EAAuFG,IAAvF,CAA4F;UAAA,IAAC;YAC3FV;UAD2F,CAAD;UAAA,OAEtFF,IAAI,CAACC,KAAD,EAAQS,IAAI,CAACI,KAAL,CAAWZ,IAAX,CAAR,CAFkF;QAAA,CAA5F,EAEqCG,OAFrC;MAGD,CAJD,MAIO;QACLA,OAAO;MACR;IACF,CAxBD;EAyBD;;EAEDU,IAAI,GAAG;IACL,IAAI,KAAKrB,OAAT,EAAkB;MAChB7B,WAAW,CAACN,OAAZ,CAAoByD,GAApB,CAAwB,KAAKtB,OAA7B;IACD;EACF;;AAhGc;;AAoGjBrC,OAAO,CAACE,OAAR,GAAkBc,UAAlB"},"metadata":{},"sourceType":"script"}