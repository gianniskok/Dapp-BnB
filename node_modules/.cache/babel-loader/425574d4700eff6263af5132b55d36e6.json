{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar watcherManager = require(\"./watcherManager\");\n\nvar EventEmitter = require(\"events\").EventEmitter;\n\nfunction Watchpack(options) {\n  EventEmitter.call(this);\n  if (!options) options = {};\n  if (!options.aggregateTimeout) options.aggregateTimeout = 200;\n  this.options = options;\n  this.watcherOptions = {\n    ignored: options.ignored,\n    poll: options.poll\n  };\n  this.fileWatchers = [];\n  this.dirWatchers = [];\n  this.mtimes = Object.create(null);\n  this.paused = false;\n  this.aggregatedChanges = [];\n  this.aggregatedRemovals = [];\n  this.aggregateTimeout = 0;\n  this._onTimeout = this._onTimeout.bind(this);\n}\n\nmodule.exports = Watchpack;\nWatchpack.prototype = Object.create(EventEmitter.prototype);\n\nWatchpack.prototype.watch = function watch(files, directories, startTime) {\n  this.paused = false;\n  var oldFileWatchers = this.fileWatchers;\n  var oldDirWatchers = this.dirWatchers;\n  this.fileWatchers = files.map(function (file) {\n    return this._fileWatcher(file, watcherManager.watchFile(file, this.watcherOptions, startTime));\n  }, this);\n  this.dirWatchers = directories.map(function (dir) {\n    return this._dirWatcher(dir, watcherManager.watchDirectory(dir, this.watcherOptions, startTime));\n  }, this);\n  oldFileWatchers.forEach(function (w) {\n    w.close();\n  }, this);\n  oldDirWatchers.forEach(function (w) {\n    w.close();\n  }, this);\n};\n\nWatchpack.prototype.close = function resume() {\n  this.paused = true;\n  if (this.aggregateTimeout) clearTimeout(this.aggregateTimeout);\n  this.fileWatchers.forEach(function (w) {\n    w.close();\n  }, this);\n  this.dirWatchers.forEach(function (w) {\n    w.close();\n  }, this);\n  this.fileWatchers.length = 0;\n  this.dirWatchers.length = 0;\n};\n\nWatchpack.prototype.pause = function pause() {\n  this.paused = true;\n  if (this.aggregateTimeout) clearTimeout(this.aggregateTimeout);\n};\n\nfunction addWatchersToArray(watchers, array) {\n  watchers.forEach(function (w) {\n    if (array.indexOf(w.directoryWatcher) < 0) {\n      array.push(w.directoryWatcher);\n      addWatchersToArray(Object.keys(w.directoryWatcher.directories).reduce(function (a, dir) {\n        if (w.directoryWatcher.directories[dir] !== true) a.push(w.directoryWatcher.directories[dir]);\n        return a;\n      }, []), array);\n    }\n  });\n}\n\nWatchpack.prototype.getTimes = function () {\n  var directoryWatchers = [];\n  addWatchersToArray(this.fileWatchers.concat(this.dirWatchers), directoryWatchers);\n  var obj = Object.create(null);\n  directoryWatchers.forEach(function (w) {\n    var times = w.getTimes();\n    Object.keys(times).forEach(function (file) {\n      obj[file] = times[file];\n    });\n  });\n  return obj;\n};\n\nWatchpack.prototype._fileWatcher = function _fileWatcher(file, watcher) {\n  watcher.on(\"change\", function (mtime, type) {\n    this._onChange(file, mtime, file, type);\n  }.bind(this));\n  watcher.on(\"remove\", function (type) {\n    this._onRemove(file, file, type);\n  }.bind(this));\n  return watcher;\n};\n\nWatchpack.prototype._dirWatcher = function _dirWatcher(item, watcher) {\n  watcher.on(\"change\", function (file, mtime, type) {\n    this._onChange(item, mtime, file, type);\n  }.bind(this));\n  return watcher;\n};\n\nWatchpack.prototype._onChange = function _onChange(item, mtime, file) {\n  file = file || item;\n  this.mtimes[file] = mtime;\n  if (this.paused) return;\n  this.emit(\"change\", file, mtime);\n  if (this.aggregateTimeout) clearTimeout(this.aggregateTimeout);\n  if (this.aggregatedChanges.indexOf(item) < 0) this.aggregatedChanges.push(item);\n  this.aggregateTimeout = setTimeout(this._onTimeout, this.options.aggregateTimeout);\n};\n\nWatchpack.prototype._onRemove = function _onRemove(item, file) {\n  file = file || item;\n  delete this.mtimes[item];\n  if (this.paused) return;\n  this.emit(\"remove\", item);\n  if (this.aggregateTimeout) clearTimeout(this.aggregateTimeout);\n  if (this.aggregatedRemovals.indexOf(item) < 0) this.aggregatedRemovals.push(item);\n  this.aggregateTimeout = setTimeout(this._onTimeout, this.options.aggregateTimeout);\n};\n\nWatchpack.prototype._onTimeout = function _onTimeout() {\n  this.aggregateTimeout = 0;\n  var changes = this.aggregatedChanges;\n  var removals = this.aggregatedRemovals;\n  this.aggregatedChanges = [];\n  this.aggregatedRemovals = [];\n  this.emit(\"aggregated\", changes, removals);\n};","map":{"version":3,"names":["watcherManager","require","EventEmitter","Watchpack","options","call","aggregateTimeout","watcherOptions","ignored","poll","fileWatchers","dirWatchers","mtimes","Object","create","paused","aggregatedChanges","aggregatedRemovals","_onTimeout","bind","module","exports","prototype","watch","files","directories","startTime","oldFileWatchers","oldDirWatchers","map","file","_fileWatcher","watchFile","dir","_dirWatcher","watchDirectory","forEach","w","close","resume","clearTimeout","length","pause","addWatchersToArray","watchers","array","indexOf","directoryWatcher","push","keys","reduce","a","getTimes","directoryWatchers","concat","obj","times","watcher","on","mtime","type","_onChange","_onRemove","item","emit","setTimeout","changes","removals"],"sources":["/Users/iaonniskokkoros/Documents/OG BrokeBoiz/node_modules/watchpack/lib/watchpack.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar watcherManager = require(\"./watcherManager\");\nvar EventEmitter = require(\"events\").EventEmitter;\n\nfunction Watchpack(options) {\n\tEventEmitter.call(this);\n\tif(!options) options = {};\n\tif(!options.aggregateTimeout) options.aggregateTimeout = 200;\n\tthis.options = options;\n\tthis.watcherOptions = {\n\t\tignored: options.ignored,\n\t\tpoll: options.poll\n\t};\n\tthis.fileWatchers = [];\n\tthis.dirWatchers = [];\n\tthis.mtimes = Object.create(null);\n\tthis.paused = false;\n\tthis.aggregatedChanges = [];\n\tthis.aggregatedRemovals = [];\n\tthis.aggregateTimeout = 0;\n\tthis._onTimeout = this._onTimeout.bind(this);\n}\n\nmodule.exports = Watchpack;\n\nWatchpack.prototype = Object.create(EventEmitter.prototype);\n\nWatchpack.prototype.watch = function watch(files, directories, startTime) {\n\tthis.paused = false;\n\tvar oldFileWatchers = this.fileWatchers;\n\tvar oldDirWatchers = this.dirWatchers;\n\tthis.fileWatchers = files.map(function(file) {\n\t\treturn this._fileWatcher(file, watcherManager.watchFile(file, this.watcherOptions, startTime));\n\t}, this);\n\tthis.dirWatchers = directories.map(function(dir) {\n\t\treturn this._dirWatcher(dir, watcherManager.watchDirectory(dir, this.watcherOptions, startTime));\n\t}, this);\n\toldFileWatchers.forEach(function(w) {\n\t\tw.close();\n\t}, this);\n\toldDirWatchers.forEach(function(w) {\n\t\tw.close();\n\t}, this);\n};\n\nWatchpack.prototype.close = function resume() {\n\tthis.paused = true;\n\tif(this.aggregateTimeout)\n\t\tclearTimeout(this.aggregateTimeout);\n\tthis.fileWatchers.forEach(function(w) {\n\t\tw.close();\n\t}, this);\n\tthis.dirWatchers.forEach(function(w) {\n\t\tw.close();\n\t}, this);\n\tthis.fileWatchers.length = 0;\n\tthis.dirWatchers.length = 0;\n};\n\nWatchpack.prototype.pause = function pause() {\n\tthis.paused = true;\n\tif(this.aggregateTimeout)\n\t\tclearTimeout(this.aggregateTimeout);\n};\n\nfunction addWatchersToArray(watchers, array) {\n\twatchers.forEach(function(w) {\n\t\tif(array.indexOf(w.directoryWatcher) < 0) {\n\t\t\tarray.push(w.directoryWatcher);\n\t\t\taddWatchersToArray(Object.keys(w.directoryWatcher.directories).reduce(function(a, dir) {\n\t\t\t\tif(w.directoryWatcher.directories[dir] !== true)\n\t\t\t\t\ta.push(w.directoryWatcher.directories[dir]);\n\t\t\t\treturn a;\n\t\t\t}, []), array);\n\t\t}\n\t});\n}\n\nWatchpack.prototype.getTimes = function() {\n\tvar directoryWatchers = [];\n\taddWatchersToArray(this.fileWatchers.concat(this.dirWatchers), directoryWatchers);\n\tvar obj = Object.create(null);\n\tdirectoryWatchers.forEach(function(w) {\n\t\tvar times = w.getTimes();\n\t\tObject.keys(times).forEach(function(file) {\n\t\t\tobj[file] = times[file];\n\t\t});\n\t});\n\treturn obj;\n};\n\nWatchpack.prototype._fileWatcher = function _fileWatcher(file, watcher) {\n\twatcher.on(\"change\", function(mtime, type) {\n\t\tthis._onChange(file, mtime, file, type);\n\t}.bind(this));\n\twatcher.on(\"remove\", function(type) {\n\t\tthis._onRemove(file, file, type);\n\t}.bind(this));\n\treturn watcher;\n};\n\nWatchpack.prototype._dirWatcher = function _dirWatcher(item, watcher) {\n\twatcher.on(\"change\", function(file, mtime, type) {\n\t\tthis._onChange(item, mtime, file, type);\n\t}.bind(this));\n\treturn watcher;\n};\n\nWatchpack.prototype._onChange = function _onChange(item, mtime, file) {\n\tfile = file || item;\n\tthis.mtimes[file] = mtime;\n\tif(this.paused) return;\n\tthis.emit(\"change\", file, mtime);\n\tif(this.aggregateTimeout)\n\t\tclearTimeout(this.aggregateTimeout);\n\tif(this.aggregatedChanges.indexOf(item) < 0)\n\t\tthis.aggregatedChanges.push(item);\n\tthis.aggregateTimeout = setTimeout(this._onTimeout, this.options.aggregateTimeout);\n};\n\nWatchpack.prototype._onRemove = function _onRemove(item, file) {\n\tfile = file || item;\n\tdelete this.mtimes[item];\n\tif(this.paused) return;\n\tthis.emit(\"remove\", item);\n\tif(this.aggregateTimeout)\n\t\tclearTimeout(this.aggregateTimeout);\n\tif(this.aggregatedRemovals.indexOf(item) < 0)\n\t\tthis.aggregatedRemovals.push(item);\n\tthis.aggregateTimeout = setTimeout(this._onTimeout, this.options.aggregateTimeout);\n};\n\nWatchpack.prototype._onTimeout = function _onTimeout() {\n\tthis.aggregateTimeout = 0;\n\tvar changes = this.aggregatedChanges;\n\tvar removals = this.aggregatedRemovals;\n\tthis.aggregatedChanges = [];\n\tthis.aggregatedRemovals = [];\n\tthis.emit(\"aggregated\", changes, removals);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}