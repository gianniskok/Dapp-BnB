{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getWindowMetadata = void 0;\n\nconst window_getters_1 = require(\"@walletconnect/window-getters\");\n\nfunction getWindowMetadata() {\n  let doc;\n  let loc;\n\n  try {\n    doc = window_getters_1.getDocumentOrThrow();\n    loc = window_getters_1.getLocationOrThrow();\n  } catch (e) {\n    return null;\n  }\n\n  function getIcons() {\n    const links = doc.getElementsByTagName(\"link\");\n    const icons = [];\n\n    for (let i = 0; i < links.length; i++) {\n      const link = links[i];\n      const rel = link.getAttribute(\"rel\");\n\n      if (rel) {\n        if (rel.toLowerCase().indexOf(\"icon\") > -1) {\n          const href = link.getAttribute(\"href\");\n\n          if (href) {\n            if (href.toLowerCase().indexOf(\"https:\") === -1 && href.toLowerCase().indexOf(\"http:\") === -1 && href.indexOf(\"//\") !== 0) {\n              let absoluteHref = loc.protocol + \"//\" + loc.host;\n\n              if (href.indexOf(\"/\") === 0) {\n                absoluteHref += href;\n              } else {\n                const path = loc.pathname.split(\"/\");\n                path.pop();\n                const finalPath = path.join(\"/\");\n                absoluteHref += finalPath + \"/\" + href;\n              }\n\n              icons.push(absoluteHref);\n            } else if (href.indexOf(\"//\") === 0) {\n              const absoluteUrl = loc.protocol + href;\n              icons.push(absoluteUrl);\n            } else {\n              icons.push(href);\n            }\n          }\n        }\n      }\n    }\n\n    return icons;\n  }\n\n  function getWindowMetadataOfAny() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    const metaTags = doc.getElementsByTagName(\"meta\");\n\n    for (let i = 0; i < metaTags.length; i++) {\n      const tag = metaTags[i];\n      const attributes = [\"itemprop\", \"property\", \"name\"].map(target => tag.getAttribute(target)).filter(attr => {\n        if (attr) {\n          return args.includes(attr);\n        }\n\n        return false;\n      });\n\n      if (attributes.length && attributes) {\n        const content = tag.getAttribute(\"content\");\n\n        if (content) {\n          return content;\n        }\n      }\n    }\n\n    return \"\";\n  }\n\n  function getName() {\n    let name = getWindowMetadataOfAny(\"name\", \"og:site_name\", \"og:title\", \"twitter:title\");\n\n    if (!name) {\n      name = doc.title;\n    }\n\n    return name;\n  }\n\n  function getDescription() {\n    const description = getWindowMetadataOfAny(\"description\", \"og:description\", \"twitter:description\", \"keywords\");\n    return description;\n  }\n\n  const name = getName();\n  const description = getDescription();\n  const url = loc.origin;\n  const icons = getIcons();\n  const meta = {\n    description,\n    url,\n    icons,\n    name\n  };\n  return meta;\n}\n\nexports.getWindowMetadata = getWindowMetadata;","map":{"version":3,"mappings":"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","names":["getWindowMetadata","doc","loc","window_getters_1","e","getIcons","links","getElementsByTagName","icons","i","length","link","rel","getAttribute","toLowerCase","indexOf","href","absoluteHref","protocol","host","path","pathname","split","pop","finalPath","join","push","absoluteUrl","getWindowMetadataOfAny","args","metaTags","tag","attributes","map","target","filter","attr","includes","content","getName","name","title","getDescription","description","url","origin","meta","exports"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}