{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar EventEmitter = require(\"events\").EventEmitter;\n\nvar async = require(\"neo-async\");\n\nvar chokidar = require(\"./chokidar\");\n\nvar fs = require(\"graceful-fs\");\n\nvar path = require(\"path\");\n\nvar watcherManager = require(\"./watcherManager\");\n\nvar FS_ACCURACY = 1000;\n\nfunction withoutCase(str) {\n  return str.toLowerCase();\n}\n\nfunction Watcher(directoryWatcher, filePath, startTime) {\n  EventEmitter.call(this);\n  this.directoryWatcher = directoryWatcher;\n  this.path = filePath;\n  this.startTime = startTime && +startTime; // TODO this.data seem to be only read, weird\n\n  this.data = 0;\n}\n\nWatcher.prototype = Object.create(EventEmitter.prototype);\nWatcher.prototype.constructor = Watcher;\n\nWatcher.prototype.checkStartTime = function checkStartTime(mtime, initial) {\n  if (typeof this.startTime !== \"number\") return !initial;\n  var startTime = this.startTime;\n  return startTime <= mtime;\n};\n\nWatcher.prototype.close = function close() {\n  this.emit(\"closed\");\n};\n\nfunction DirectoryWatcher(directoryPath, options) {\n  EventEmitter.call(this);\n  this.options = options;\n  this.path = directoryPath;\n  this.files = Object.create(null);\n  this.directories = Object.create(null);\n  var interval = typeof options.poll === \"number\" ? options.poll : undefined;\n  this.watcher = chokidar.watch(directoryPath, {\n    ignoreInitial: true,\n    persistent: true,\n    followSymlinks: false,\n    depth: 0,\n    atomic: false,\n    alwaysStat: true,\n    ignorePermissionErrors: true,\n    ignored: options.ignored,\n    usePolling: options.poll ? true : undefined,\n    interval: interval,\n    binaryInterval: interval,\n    disableGlobbing: true\n  });\n  this.watcher.on(\"add\", this.onFileAdded.bind(this));\n  this.watcher.on(\"addDir\", this.onDirectoryAdded.bind(this));\n  this.watcher.on(\"change\", this.onChange.bind(this));\n  this.watcher.on(\"unlink\", this.onFileUnlinked.bind(this));\n  this.watcher.on(\"unlinkDir\", this.onDirectoryUnlinked.bind(this));\n  this.watcher.on(\"error\", this.onWatcherError.bind(this));\n  this.initialScan = true;\n  this.nestedWatching = false;\n  this.initialScanRemoved = [];\n  this.doInitialScan();\n  this.watchers = Object.create(null);\n  this.parentWatcher = null;\n  this.refs = 0;\n}\n\nmodule.exports = DirectoryWatcher;\nDirectoryWatcher.prototype = Object.create(EventEmitter.prototype);\nDirectoryWatcher.prototype.constructor = DirectoryWatcher;\n\nDirectoryWatcher.prototype.setFileTime = function setFileTime(filePath, mtime, initial, type) {\n  var now = Date.now();\n  var old = this.files[filePath];\n  this.files[filePath] = [initial ? Math.min(now, mtime) : now, mtime]; // we add the fs accuracy to reach the maximum possible mtime\n\n  if (mtime) mtime = mtime + FS_ACCURACY;\n\n  if (!old) {\n    if (mtime) {\n      if (this.watchers[withoutCase(filePath)]) {\n        this.watchers[withoutCase(filePath)].forEach(function (w) {\n          if (!initial || w.checkStartTime(mtime, initial)) {\n            w.emit(\"change\", mtime, initial ? \"initial\" : type);\n          }\n        });\n      }\n    }\n  } else if (!initial && mtime) {\n    if (this.watchers[withoutCase(filePath)]) {\n      this.watchers[withoutCase(filePath)].forEach(function (w) {\n        w.emit(\"change\", mtime, type);\n      });\n    }\n  } else if (!initial && !mtime) {\n    if (this.watchers[withoutCase(filePath)]) {\n      this.watchers[withoutCase(filePath)].forEach(function (w) {\n        w.emit(\"remove\", type);\n      });\n    }\n  }\n\n  if (this.watchers[withoutCase(this.path)]) {\n    this.watchers[withoutCase(this.path)].forEach(function (w) {\n      if (!initial || w.checkStartTime(mtime, initial)) {\n        w.emit(\"change\", filePath, mtime, initial ? \"initial\" : type);\n      }\n    });\n  }\n};\n\nDirectoryWatcher.prototype.setDirectory = function setDirectory(directoryPath, exist, initial, type) {\n  if (directoryPath === this.path) {\n    if (!initial && this.watchers[withoutCase(this.path)]) {\n      this.watchers[withoutCase(this.path)].forEach(function (w) {\n        w.emit(\"change\", directoryPath, w.data, initial ? \"initial\" : type);\n      });\n    }\n  } else {\n    var old = this.directories[directoryPath];\n\n    if (!old) {\n      if (exist) {\n        if (this.nestedWatching) {\n          this.createNestedWatcher(directoryPath);\n        } else {\n          this.directories[directoryPath] = true;\n        }\n\n        if (!initial && this.watchers[withoutCase(this.path)]) {\n          this.watchers[withoutCase(this.path)].forEach(function (w) {\n            w.emit(\"change\", directoryPath, w.data, initial ? \"initial\" : type);\n          });\n        }\n\n        if (this.watchers[withoutCase(directoryPath) + \"#directory\"]) {\n          this.watchers[withoutCase(directoryPath) + \"#directory\"].forEach(function (w) {\n            w.emit(\"change\", w.data, initial ? \"initial\" : type);\n          });\n        }\n      }\n    } else {\n      if (!exist) {\n        if (this.nestedWatching) this.directories[directoryPath].close();\n        delete this.directories[directoryPath];\n\n        if (!initial && this.watchers[withoutCase(this.path)]) {\n          this.watchers[withoutCase(this.path)].forEach(function (w) {\n            w.emit(\"change\", directoryPath, w.data, initial ? \"initial\" : type);\n          });\n        }\n\n        if (this.watchers[withoutCase(directoryPath) + \"#directory\"]) {\n          this.watchers[withoutCase(directoryPath) + \"#directory\"].forEach(function (w) {\n            w.emit(\"change\", directoryPath, w.data, initial ? \"initial\" : type);\n          });\n        }\n      }\n    }\n  }\n};\n\nDirectoryWatcher.prototype.createNestedWatcher = function (directoryPath) {\n  this.directories[directoryPath] = watcherManager.watchDirectory(directoryPath, this.options, 1);\n  this.directories[directoryPath].on(\"change\", function (filePath, mtime, type) {\n    if (this.watchers[withoutCase(this.path)]) {\n      this.watchers[withoutCase(this.path)].forEach(function (w) {\n        if (w.checkStartTime(mtime, false)) {\n          w.emit(\"change\", filePath, mtime, type);\n        }\n      });\n    }\n  }.bind(this));\n};\n\nDirectoryWatcher.prototype.setNestedWatching = function (flag) {\n  if (this.nestedWatching !== !!flag) {\n    this.nestedWatching = !!flag;\n\n    if (this.nestedWatching) {\n      Object.keys(this.directories).forEach(function (directory) {\n        this.createNestedWatcher(directory);\n      }, this);\n    } else {\n      Object.keys(this.directories).forEach(function (directory) {\n        this.directories[directory].close();\n        this.directories[directory] = true;\n      }, this);\n    }\n  }\n};\n\nDirectoryWatcher.prototype.watch = function watch(filePath, startTime) {\n  this.watchers[withoutCase(filePath)] = this.watchers[withoutCase(filePath)] || [];\n  this.refs++;\n  var watcher = new Watcher(this, filePath, startTime);\n  watcher.on(\"closed\", function () {\n    var idx = this.watchers[withoutCase(filePath)].indexOf(watcher);\n    this.watchers[withoutCase(filePath)].splice(idx, 1);\n\n    if (this.watchers[withoutCase(filePath)].length === 0) {\n      delete this.watchers[withoutCase(filePath)];\n      if (this.path === filePath) this.setNestedWatching(false);\n    }\n\n    if (--this.refs <= 0) this.close();\n  }.bind(this));\n  this.watchers[withoutCase(filePath)].push(watcher);\n  var data;\n\n  if (filePath === this.path) {\n    this.setNestedWatching(true);\n    data = false;\n    Object.keys(this.files).forEach(function (file) {\n      var d = this.files[file];\n      if (!data) data = d;else data = [Math.max(data[0], d[0]), Math.max(data[1], d[1])];\n    }, this);\n  } else {\n    data = this.files[filePath];\n  }\n\n  process.nextTick(function () {\n    if (data) {\n      var ts = data[0] === data[1] ? data[0] + FS_ACCURACY : data[0];\n      if (ts >= startTime) watcher.emit(\"change\", data[1]);\n    } else if (this.initialScan && this.initialScanRemoved.indexOf(filePath) >= 0) {\n      watcher.emit(\"remove\");\n    }\n  }.bind(this));\n  return watcher;\n};\n\nDirectoryWatcher.prototype.onFileAdded = function onFileAdded(filePath, stat) {\n  if (filePath.indexOf(this.path) !== 0) return;\n  if (/[\\\\\\/]/.test(filePath.substr(this.path.length + 1))) return;\n  this.setFileTime(filePath, +stat.mtime || +stat.ctime || 1, false, \"add\");\n};\n\nDirectoryWatcher.prototype.onDirectoryAdded = function onDirectoryAdded(directoryPath\n/*, stat */\n) {\n  if (directoryPath.indexOf(this.path) !== 0) return;\n  if (/[\\\\\\/]/.test(directoryPath.substr(this.path.length + 1))) return;\n  this.setDirectory(directoryPath, true, false, \"add\");\n};\n\nDirectoryWatcher.prototype.onChange = function onChange(filePath, stat) {\n  if (filePath.indexOf(this.path) !== 0) return;\n  if (/[\\\\\\/]/.test(filePath.substr(this.path.length + 1))) return;\n  var mtime = +stat.mtime || +stat.ctime || 1;\n  ensureFsAccuracy(mtime);\n  this.setFileTime(filePath, mtime, false, \"change\");\n};\n\nDirectoryWatcher.prototype.onFileUnlinked = function onFileUnlinked(filePath) {\n  if (filePath.indexOf(this.path) !== 0) return;\n  if (/[\\\\\\/]/.test(filePath.substr(this.path.length + 1))) return;\n  this.setFileTime(filePath, null, false, \"unlink\");\n\n  if (this.initialScan) {\n    this.initialScanRemoved.push(filePath);\n  }\n};\n\nDirectoryWatcher.prototype.onDirectoryUnlinked = function onDirectoryUnlinked(directoryPath) {\n  if (directoryPath.indexOf(this.path) !== 0) return;\n  if (/[\\\\\\/]/.test(directoryPath.substr(this.path.length + 1))) return;\n  this.setDirectory(directoryPath, false, false, \"unlink\");\n\n  if (this.initialScan) {\n    this.initialScanRemoved.push(directoryPath);\n  }\n};\n\nDirectoryWatcher.prototype.onWatcherError = function onWatcherError(err) {\n  console.warn(\"Error from chokidar (\" + this.path + \"): \" + err);\n};\n\nDirectoryWatcher.prototype.doInitialScan = function doInitialScan() {\n  fs.readdir(this.path, function (err, items) {\n    if (err) {\n      this.parentWatcher = watcherManager.watchFile(this.path + \"#directory\", this.options, 1);\n      this.parentWatcher.on(\"change\", function (mtime, type) {\n        if (this.watchers[withoutCase(this.path)]) {\n          this.watchers[withoutCase(this.path)].forEach(function (w) {\n            w.emit(\"change\", this.path, mtime, type);\n          }, this);\n        }\n      }.bind(this));\n      this.initialScan = false;\n      return;\n    }\n\n    async.forEach(items, function (item, callback) {\n      var itemPath = path.join(this.path, item);\n      fs.stat(itemPath, function (err2, stat) {\n        if (!this.initialScan) return;\n\n        if (err2) {\n          callback();\n          return;\n        }\n\n        if (stat.isFile()) {\n          if (!this.files[itemPath]) this.setFileTime(itemPath, +stat.mtime || +stat.ctime || 1, true);\n        } else if (stat.isDirectory()) {\n          if (!this.directories[itemPath]) this.setDirectory(itemPath, true, true);\n        }\n\n        callback();\n      }.bind(this));\n    }.bind(this), function () {\n      this.initialScan = false;\n      this.initialScanRemoved = null;\n    }.bind(this));\n  }.bind(this));\n};\n\nDirectoryWatcher.prototype.getTimes = function () {\n  var obj = Object.create(null);\n  var selfTime = 0;\n  Object.keys(this.files).forEach(function (file) {\n    var data = this.files[file];\n    var time;\n\n    if (data[1]) {\n      time = Math.max(data[0], data[1] + FS_ACCURACY);\n    } else {\n      time = data[0];\n    }\n\n    obj[file] = time;\n    if (time > selfTime) selfTime = time;\n  }, this);\n\n  if (this.nestedWatching) {\n    Object.keys(this.directories).forEach(function (dir) {\n      var w = this.directories[dir];\n      var times = w.directoryWatcher.getTimes();\n      Object.keys(times).forEach(function (file) {\n        var time = times[file];\n        obj[file] = time;\n        if (time > selfTime) selfTime = time;\n      });\n    }, this);\n    obj[this.path] = selfTime;\n  }\n\n  return obj;\n};\n\nDirectoryWatcher.prototype.close = function () {\n  this.initialScan = false;\n  var p = this.watcher.close();\n  if (p && p.catch) p.catch(this.onWatcherError.bind(this));\n\n  if (this.nestedWatching) {\n    Object.keys(this.directories).forEach(function (dir) {\n      this.directories[dir].close();\n    }, this);\n  }\n\n  if (this.parentWatcher) this.parentWatcher.close();\n  this.emit(\"closed\");\n};\n\nfunction ensureFsAccuracy(mtime) {\n  if (!mtime) return;\n  if (FS_ACCURACY > 1 && mtime % 1 !== 0) FS_ACCURACY = 1;else if (FS_ACCURACY > 10 && mtime % 10 !== 0) FS_ACCURACY = 10;else if (FS_ACCURACY > 100 && mtime % 100 !== 0) FS_ACCURACY = 100;\n}","map":{"version":3,"names":["EventEmitter","require","async","chokidar","fs","path","watcherManager","FS_ACCURACY","withoutCase","str","toLowerCase","Watcher","directoryWatcher","filePath","startTime","call","data","prototype","Object","create","constructor","checkStartTime","mtime","initial","close","emit","DirectoryWatcher","directoryPath","options","files","directories","interval","poll","undefined","watcher","watch","ignoreInitial","persistent","followSymlinks","depth","atomic","alwaysStat","ignorePermissionErrors","ignored","usePolling","binaryInterval","disableGlobbing","on","onFileAdded","bind","onDirectoryAdded","onChange","onFileUnlinked","onDirectoryUnlinked","onWatcherError","initialScan","nestedWatching","initialScanRemoved","doInitialScan","watchers","parentWatcher","refs","module","exports","setFileTime","type","now","Date","old","Math","min","forEach","w","setDirectory","exist","createNestedWatcher","watchDirectory","setNestedWatching","flag","keys","directory","idx","indexOf","splice","length","push","file","d","max","process","nextTick","ts","stat","test","substr","ctime","ensureFsAccuracy","err","console","warn","readdir","items","watchFile","item","callback","itemPath","join","err2","isFile","isDirectory","getTimes","obj","selfTime","time","dir","times","p","catch"],"sources":["/Users/iaonniskokkoros/Documents/OG BrokeBoiz/node_modules/watchpack/lib/DirectoryWatcher.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar EventEmitter = require(\"events\").EventEmitter;\nvar async = require(\"neo-async\");\nvar chokidar = require(\"./chokidar\");\nvar fs = require(\"graceful-fs\");\nvar path = require(\"path\");\n\nvar watcherManager = require(\"./watcherManager\");\n\nvar FS_ACCURACY = 1000;\n\n\nfunction withoutCase(str) {\n\treturn str.toLowerCase();\n}\n\n\nfunction Watcher(directoryWatcher, filePath, startTime) {\n\tEventEmitter.call(this);\n\tthis.directoryWatcher = directoryWatcher;\n\tthis.path = filePath;\n\tthis.startTime = startTime && +startTime;\n\t// TODO this.data seem to be only read, weird\n\tthis.data = 0;\n}\n\nWatcher.prototype = Object.create(EventEmitter.prototype);\nWatcher.prototype.constructor = Watcher;\n\nWatcher.prototype.checkStartTime = function checkStartTime(mtime, initial) {\n\tif(typeof this.startTime !== \"number\") return !initial;\n\tvar startTime = this.startTime;\n\treturn startTime <= mtime;\n};\n\nWatcher.prototype.close = function close() {\n\tthis.emit(\"closed\");\n};\n\n\nfunction DirectoryWatcher(directoryPath, options) {\n\tEventEmitter.call(this);\n\tthis.options = options;\n\tthis.path = directoryPath;\n\tthis.files = Object.create(null);\n\tthis.directories = Object.create(null);\n\tvar interval = typeof options.poll === \"number\" ? options.poll : undefined;\n\tthis.watcher = chokidar.watch(directoryPath, {\n\t\tignoreInitial: true,\n\t\tpersistent: true,\n\t\tfollowSymlinks: false,\n\t\tdepth: 0,\n\t\tatomic: false,\n\t\talwaysStat: true,\n\t\tignorePermissionErrors: true,\n\t\tignored: options.ignored,\n\t\tusePolling: options.poll ? true : undefined,\n\t\tinterval: interval,\n\t\tbinaryInterval: interval,\n\t\tdisableGlobbing: true\n\t});\n\tthis.watcher.on(\"add\", this.onFileAdded.bind(this));\n\tthis.watcher.on(\"addDir\", this.onDirectoryAdded.bind(this));\n\tthis.watcher.on(\"change\", this.onChange.bind(this));\n\tthis.watcher.on(\"unlink\", this.onFileUnlinked.bind(this));\n\tthis.watcher.on(\"unlinkDir\", this.onDirectoryUnlinked.bind(this));\n\tthis.watcher.on(\"error\", this.onWatcherError.bind(this));\n\tthis.initialScan = true;\n\tthis.nestedWatching = false;\n\tthis.initialScanRemoved = [];\n\tthis.doInitialScan();\n\tthis.watchers = Object.create(null);\n\tthis.parentWatcher = null;\n\tthis.refs = 0;\n}\nmodule.exports = DirectoryWatcher;\n\nDirectoryWatcher.prototype = Object.create(EventEmitter.prototype);\nDirectoryWatcher.prototype.constructor = DirectoryWatcher;\n\nDirectoryWatcher.prototype.setFileTime = function setFileTime(filePath, mtime, initial, type) {\n\tvar now = Date.now();\n\tvar old = this.files[filePath];\n\n\tthis.files[filePath] = [initial ? Math.min(now, mtime) : now, mtime];\n\n\t// we add the fs accuracy to reach the maximum possible mtime\n\tif(mtime)\n\t\tmtime = mtime + FS_ACCURACY;\n\n\tif(!old) {\n\t\tif(mtime) {\n\t\t\tif(this.watchers[withoutCase(filePath)]) {\n\t\t\t\tthis.watchers[withoutCase(filePath)].forEach(function(w) {\n\t\t\t\t\tif(!initial || w.checkStartTime(mtime, initial)) {\n\t\t\t\t\t\tw.emit(\"change\", mtime, initial ? \"initial\" : type);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t} else if(!initial && mtime) {\n\t\tif(this.watchers[withoutCase(filePath)]) {\n\t\t\tthis.watchers[withoutCase(filePath)].forEach(function(w) {\n\t\t\t\tw.emit(\"change\", mtime, type);\n\t\t\t});\n\t\t}\n\t} else if(!initial && !mtime) {\n\t\tif(this.watchers[withoutCase(filePath)]) {\n\t\t\tthis.watchers[withoutCase(filePath)].forEach(function(w) {\n\t\t\t\tw.emit(\"remove\", type);\n\t\t\t});\n\t\t}\n\t}\n\tif(this.watchers[withoutCase(this.path)]) {\n\t\tthis.watchers[withoutCase(this.path)].forEach(function(w) {\n\t\t\tif(!initial || w.checkStartTime(mtime, initial)) {\n\t\t\t\tw.emit(\"change\", filePath, mtime, initial ? \"initial\" : type);\n\t\t\t}\n\t\t});\n\t}\n};\n\nDirectoryWatcher.prototype.setDirectory = function setDirectory(directoryPath, exist, initial, type) {\n\tif(directoryPath === this.path) {\n\t\tif(!initial && this.watchers[withoutCase(this.path)]) {\n\t\t\tthis.watchers[withoutCase(this.path)].forEach(function(w) {\n\t\t\t\tw.emit(\"change\", directoryPath, w.data, initial ? \"initial\" : type);\n\t\t\t});\n\t\t}\n\t} else {\n\t\tvar old = this.directories[directoryPath];\n\t\tif(!old) {\n\t\t\tif(exist) {\n\t\t\t\tif(this.nestedWatching) {\n\t\t\t\t\tthis.createNestedWatcher(directoryPath);\n\t\t\t\t} else {\n\t\t\t\t\tthis.directories[directoryPath] = true;\n\t\t\t\t}\n\t\t\t\tif(!initial && this.watchers[withoutCase(this.path)]) {\n\t\t\t\t\tthis.watchers[withoutCase(this.path)].forEach(function(w) {\n\t\t\t\t\t\tw.emit(\"change\", directoryPath, w.data, initial ? \"initial\" : type);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif(this.watchers[withoutCase(directoryPath) + \"#directory\"]) {\n\t\t\t\t\tthis.watchers[withoutCase(directoryPath) + \"#directory\"].forEach(function(w) {\n\t\t\t\t\t\tw.emit(\"change\", w.data, initial ? \"initial\" : type);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif(!exist) {\n\t\t\t\tif(this.nestedWatching)\n\t\t\t\t\tthis.directories[directoryPath].close();\n\t\t\t\tdelete this.directories[directoryPath];\n\t\t\t\tif(!initial && this.watchers[withoutCase(this.path)]) {\n\t\t\t\t\tthis.watchers[withoutCase(this.path)].forEach(function(w) {\n\t\t\t\t\t\tw.emit(\"change\", directoryPath, w.data, initial ? \"initial\" : type);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif(this.watchers[withoutCase(directoryPath) + \"#directory\"]) {\n\t\t\t\t\tthis.watchers[withoutCase(directoryPath) + \"#directory\"].forEach(function(w) {\n\t\t\t\t\t\tw.emit(\"change\", directoryPath, w.data, initial ? \"initial\" : type);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nDirectoryWatcher.prototype.createNestedWatcher = function(directoryPath) {\n\tthis.directories[directoryPath] = watcherManager.watchDirectory(directoryPath, this.options, 1);\n\tthis.directories[directoryPath].on(\"change\", function(filePath, mtime, type) {\n\t\tif(this.watchers[withoutCase(this.path)]) {\n\t\t\tthis.watchers[withoutCase(this.path)].forEach(function(w) {\n\t\t\t\tif(w.checkStartTime(mtime, false)) {\n\t\t\t\t\tw.emit(\"change\", filePath, mtime, type);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}.bind(this));\n};\n\nDirectoryWatcher.prototype.setNestedWatching = function(flag) {\n\tif(this.nestedWatching !== !!flag) {\n\t\tthis.nestedWatching = !!flag;\n\t\tif(this.nestedWatching) {\n\t\t\tObject.keys(this.directories).forEach(function(directory) {\n\t\t\t\tthis.createNestedWatcher(directory);\n\t\t\t}, this);\n\t\t} else {\n\t\t\tObject.keys(this.directories).forEach(function(directory) {\n\t\t\t\tthis.directories[directory].close();\n\t\t\t\tthis.directories[directory] = true;\n\t\t\t}, this);\n\t\t}\n\t}\n};\n\nDirectoryWatcher.prototype.watch = function watch(filePath, startTime) {\n\tthis.watchers[withoutCase(filePath)] = this.watchers[withoutCase(filePath)] || [];\n\tthis.refs++;\n\tvar watcher = new Watcher(this, filePath, startTime);\n\twatcher.on(\"closed\", function() {\n\t\tvar idx = this.watchers[withoutCase(filePath)].indexOf(watcher);\n\t\tthis.watchers[withoutCase(filePath)].splice(idx, 1);\n\t\tif(this.watchers[withoutCase(filePath)].length === 0) {\n\t\t\tdelete this.watchers[withoutCase(filePath)];\n\t\t\tif(this.path === filePath)\n\t\t\t\tthis.setNestedWatching(false);\n\t\t}\n\t\tif(--this.refs <= 0)\n\t\t\tthis.close();\n\t}.bind(this));\n\tthis.watchers[withoutCase(filePath)].push(watcher);\n\tvar data;\n\tif(filePath === this.path) {\n\t\tthis.setNestedWatching(true);\n\t\tdata = false;\n\t\tObject.keys(this.files).forEach(function(file) {\n\t\t\tvar d = this.files[file];\n\t\t\tif(!data)\n\t\t\t\tdata = d;\n\t\t\telse\n\t\t\t\tdata = [Math.max(data[0], d[0]), Math.max(data[1], d[1])];\n\t\t}, this);\n\t} else {\n\t\tdata = this.files[filePath];\n\t}\n\tprocess.nextTick(function() {\n\t\tif(data) {\n\t\t\tvar ts = data[0] === data[1] ? data[0] + FS_ACCURACY : data[0];\n\t\t\tif(ts >= startTime)\n\t\t\t\twatcher.emit(\"change\", data[1]);\n\t\t} else if(this.initialScan && this.initialScanRemoved.indexOf(filePath) >= 0) {\n\t\t\twatcher.emit(\"remove\");\n\t\t}\n\t}.bind(this));\n\treturn watcher;\n};\n\nDirectoryWatcher.prototype.onFileAdded = function onFileAdded(filePath, stat) {\n\tif(filePath.indexOf(this.path) !== 0) return;\n\tif(/[\\\\\\/]/.test(filePath.substr(this.path.length + 1))) return;\n\n\tthis.setFileTime(filePath, +stat.mtime || +stat.ctime || 1, false, \"add\");\n};\n\nDirectoryWatcher.prototype.onDirectoryAdded = function onDirectoryAdded(directoryPath /*, stat */) {\n\tif(directoryPath.indexOf(this.path) !== 0) return;\n\tif(/[\\\\\\/]/.test(directoryPath.substr(this.path.length + 1))) return;\n\tthis.setDirectory(directoryPath, true, false, \"add\");\n};\n\nDirectoryWatcher.prototype.onChange = function onChange(filePath, stat) {\n\tif(filePath.indexOf(this.path) !== 0) return;\n\tif(/[\\\\\\/]/.test(filePath.substr(this.path.length + 1))) return;\n\tvar mtime = +stat.mtime || +stat.ctime || 1;\n\tensureFsAccuracy(mtime);\n\tthis.setFileTime(filePath, mtime, false, \"change\");\n};\n\nDirectoryWatcher.prototype.onFileUnlinked = function onFileUnlinked(filePath) {\n\tif(filePath.indexOf(this.path) !== 0) return;\n\tif(/[\\\\\\/]/.test(filePath.substr(this.path.length + 1))) return;\n\tthis.setFileTime(filePath, null, false, \"unlink\");\n\tif(this.initialScan) {\n\t\tthis.initialScanRemoved.push(filePath);\n\t}\n};\n\nDirectoryWatcher.prototype.onDirectoryUnlinked = function onDirectoryUnlinked(directoryPath) {\n\tif(directoryPath.indexOf(this.path) !== 0) return;\n\tif(/[\\\\\\/]/.test(directoryPath.substr(this.path.length + 1))) return;\n\tthis.setDirectory(directoryPath, false, false, \"unlink\");\n\tif(this.initialScan) {\n\t\tthis.initialScanRemoved.push(directoryPath);\n\t}\n};\n\nDirectoryWatcher.prototype.onWatcherError = function onWatcherError(err) {\n\tconsole.warn(\"Error from chokidar (\" + this.path + \"): \" + err);\n};\n\nDirectoryWatcher.prototype.doInitialScan = function doInitialScan() {\n\tfs.readdir(this.path, function(err, items) {\n\t\tif(err) {\n\t\t\tthis.parentWatcher = watcherManager.watchFile(this.path + \"#directory\", this.options, 1);\n\t\t\tthis.parentWatcher.on(\"change\", function(mtime, type) {\n\t\t\t\tif(this.watchers[withoutCase(this.path)]) {\n\t\t\t\t\tthis.watchers[withoutCase(this.path)].forEach(function(w) {\n\t\t\t\t\t\tw.emit(\"change\", this.path, mtime, type);\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tthis.initialScan = false;\n\t\t\treturn;\n\t\t}\n\t\tasync.forEach(items, function(item, callback) {\n\t\t\tvar itemPath = path.join(this.path, item);\n\t\t\tfs.stat(itemPath, function(err2, stat) {\n\t\t\t\tif(!this.initialScan) return;\n\t\t\t\tif(err2) {\n\t\t\t\t\tcallback();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(stat.isFile()) {\n\t\t\t\t\tif(!this.files[itemPath])\n\t\t\t\t\t\tthis.setFileTime(itemPath, +stat.mtime || +stat.ctime || 1, true);\n\t\t\t\t} else if(stat.isDirectory()) {\n\t\t\t\t\tif(!this.directories[itemPath])\n\t\t\t\t\t\tthis.setDirectory(itemPath, true, true);\n\t\t\t\t}\n\t\t\t\tcallback();\n\t\t\t}.bind(this));\n\t\t}.bind(this), function() {\n\t\t\tthis.initialScan = false;\n\t\t\tthis.initialScanRemoved = null;\n\t\t}.bind(this));\n\t}.bind(this));\n};\n\nDirectoryWatcher.prototype.getTimes = function() {\n\tvar obj = Object.create(null);\n\tvar selfTime = 0;\n\tObject.keys(this.files).forEach(function(file) {\n\t\tvar data = this.files[file];\n\t\tvar time;\n\t\tif(data[1]) {\n\t\t\ttime = Math.max(data[0], data[1] + FS_ACCURACY);\n\t\t} else {\n\t\t\ttime = data[0];\n\t\t}\n\t\tobj[file] = time;\n\t\tif(time > selfTime)\n\t\t\tselfTime = time;\n\t}, this);\n\tif(this.nestedWatching) {\n\t\tObject.keys(this.directories).forEach(function(dir) {\n\t\t\tvar w = this.directories[dir];\n\t\t\tvar times = w.directoryWatcher.getTimes();\n\t\t\tObject.keys(times).forEach(function(file) {\n\t\t\t\tvar time = times[file];\n\t\t\t\tobj[file] = time;\n\t\t\t\tif(time > selfTime)\n\t\t\t\t\tselfTime = time;\n\t\t\t});\n\t\t}, this);\n\t\tobj[this.path] = selfTime;\n\t}\n\treturn obj;\n};\n\nDirectoryWatcher.prototype.close = function() {\n\tthis.initialScan = false;\n\tvar p = this.watcher.close();\n\tif(p && p.catch) p.catch(this.onWatcherError.bind(this));\n\tif(this.nestedWatching) {\n\t\tObject.keys(this.directories).forEach(function(dir) {\n\t\t\tthis.directories[dir].close();\n\t\t}, this);\n\t}\n\tif(this.parentWatcher) this.parentWatcher.close();\n\tthis.emit(\"closed\");\n};\n\nfunction ensureFsAccuracy(mtime) {\n\tif(!mtime) return;\n\tif(FS_ACCURACY > 1 && mtime % 1 !== 0)\n\t\tFS_ACCURACY = 1;\n\telse if(FS_ACCURACY > 10 && mtime % 10 !== 0)\n\t\tFS_ACCURACY = 10;\n\telse if(FS_ACCURACY > 100 && mtime % 100 !== 0)\n\t\tFS_ACCURACY = 100;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}